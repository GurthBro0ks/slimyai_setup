exports.id=830,exports.ids=[830],exports.modules={9824:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>d});var s=r(997),i=r(6689),n=r(5941),l=r(7751),o=e([n]);n=(o.then?(await o)():o)[0];let c=e=>(0,l.SC)(e);function d(){let{data:e}=(0,n.default)("/api/diag",c,{refreshInterval:6e4,revalidateOnFocus:!1}),[t,r]=(0,i.useState)(!1);if(!t||!e?.ok)return null;let a=e.admin||{},o=e.uploads||{};return(0,s.jsxs)("div",{style:{padding:"0.9rem 1rem",borderRadius:12,border:"1px solid rgba(148, 163, 184, 0.18)",background:"rgba(12, 17, 29, 0.9)",marginBottom:18,boxShadow:"0 12px 30px rgba(15, 23, 42, 0.35)"},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Diagnostics"}),(0,s.jsxs)("div",{style:{fontSize:12,opacity:.85},children:["API Uptime: ",s.jsx("strong",{children:(0,l.Y)(a.uptimeSec)})]}),(0,s.jsxs)("div",{style:{fontSize:12,opacity:.85},children:["Memory: ",s.jsx("strong",{children:a.memory?`${a.memory.rssMb} MB`:"—"})]}),(0,s.jsxs)("div",{style:{fontSize:12,opacity:.85},children:["Uploads today: ",s.jsx("strong",{children:o.today??0})]}),(0,s.jsxs)("div",{style:{fontSize:12,opacity:.75},children:["Total uploads: ",o.total??0]})]})}a()}catch(e){a(e)}})},1398:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>g});var s=r(997),i=r(6689),n=r(968),l=r.n(n),o=r(1664),d=r.n(o),c=r(1163),h=r(2608),u=r(7751),x=r(9824),p=r(4947),m=e([x,p]);[x,p]=m.then?(await m)():m;let f=[{href:e=>`/guilds/${e}`,label:"Dashboard"},{href:e=>`/guilds/${e}/settings`,label:"Club Settings"},{href:e=>`/guilds/${e}/channels`,label:"Channels"},{href:e=>`/guilds/${e}/personality`,label:"Personality"},{href:e=>`/guilds/${e}/usage`,label:"Usage"}];function g({guildId:e,children:t,title:r,hideSidebar:a=!1}){let n=(0,c.useRouter)(),o=(0,u.h_)(),{user:m,refresh:g}=(0,h.k)(),[y,b]=(0,i.useState)(!1),j=()=>b(!1),v=m?.role||"member",S=(0,i.useMemo)(()=>{if(!e||!m?.guilds)return v;let t=m.guilds.find(t=>String(t.id)===String(e));return t&&t.role||v},[m?.guilds,e,v]),k="admin"===S,C="club"===S&&!k,T=(0,i.useMemo)(()=>n.asPath?n.asPath.split("?")[0]:"",[n.asPath]),w=(0,i.useMemo)(()=>e&&k?f.map(t=>{let r=t.href(e);return{...t,href:r,active:T===r}}):[],[e,T,k]),D=e?`/snail/${e}`:"/snail",P=(0,i.useMemo)(()=>!!n.asPath&&n.asPath.startsWith("/snail"),[n.asPath]),z=(0,i.useMemo)(()=>!!n.asPath&&n.asPath.startsWith("/email-login"),[n.asPath]),M=(0,i.useMemo)(()=>!!n.asPath&&n.asPath.startsWith("/club"),[n.asPath]);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l(),{children:s.jsx("title",{children:r||"slimy.ai – Admin Panel"})}),!a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"header",children:[s.jsx("button",{className:"burger",onClick:()=>b(e=>!e),"aria-label":"Toggle menu",children:"☰"}),s.jsx("div",{style:{fontWeight:700},children:"slimy.ai Admin"}),s.jsx("div",{style:{width:40}})]}),(0,s.jsxs)("div",{className:"shell",children:[(0,s.jsxs)("aside",{"data-open":y?"true":"false",children:[s.jsx("div",{className:"diag card",children:s.jsx(x.Z,{})}),(0,s.jsxs)("div",{style:{marginBottom:24},children:[s.jsx("h1",{style:{margin:0,fontSize:22,fontWeight:700},children:"slimy.ai Admin"}),m&&(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:12},children:[(0,s.jsxs)("span",{style:{opacity:.8,fontSize:14},children:[m.username," \xb7 ",S.toUpperCase()]}),s.jsx("button",{className:"btn outline",onClick:async()=>{try{await o("/api/auth/logout",{method:"POST"}),await g(),n.push("/")}catch(e){console.error(e)}},children:"Logout"})]})]}),(0,s.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:16},children:[k&&e?s.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:8},children:w.map(e=>s.jsx(d(),{href:e.href,legacyBehavior:!0,children:s.jsx("a",{onClick:j,style:{padding:"10px 12px",borderRadius:8,background:e.active?"rgba(56, 189, 248, 0.15)":"transparent",border:e.active?"1px solid rgba(56, 189, 248, 0.4)":"1px solid transparent"},children:e.label})},e.href))}):k?s.jsx("p",{style:{opacity:.7},children:"Select a guild to begin."}):s.jsx("p",{style:{opacity:.7},children:"Snail tools let members analyze captures without admin access."}),(0,s.jsxs)("nav",{style:{display:"flex",flexDirection:"column",gap:8},children:[C&&s.jsx(d(),{href:"/club",legacyBehavior:!0,children:s.jsx("a",{onClick:j,style:{padding:"10px 12px",borderRadius:8,background:M?"rgba(56, 189, 248, 0.15)":"transparent",border:M?"1px solid rgba(56, 189, 248, 0.4)":"1px solid transparent"},children:"Club Dashboard"})}),s.jsx(d(),{href:D,legacyBehavior:!0,children:(0,s.jsxs)("a",{onClick:j,style:{padding:"10px 12px",borderRadius:8,display:"inline-flex",alignItems:"center",gap:8,fontWeight:600,background:P?"rgba(56, 189, 248, 0.15)":"transparent",border:P?"1px solid rgba(56, 189, 248, 0.4)":"1px solid transparent"},children:[s.jsx("span",{role:"img","aria-label":"snail",children:"\uD83D\uDC0C"})," Snail Tools"]})}),s.jsx(d(),{href:"/chat",legacyBehavior:!0,children:s.jsx("a",{onClick:j,style:{padding:"10px 12px",borderRadius:8,display:"inline-flex",alignItems:"center",gap:8,fontWeight:600,background:n.asPath.startsWith("/chat")?"rgba(56, 189, 248, 0.15)":"transparent",border:n.asPath.startsWith("/chat")?"1px solid rgba(56, 189, 248, 0.4)":"1px solid transparent"},children:"\uD83D\uDCAC Slime Chat"})}),k&&s.jsx(d(),{href:"/email-login",legacyBehavior:!0,children:s.jsx("a",{onClick:j,style:{padding:"10px 12px",borderRadius:8,display:"inline-flex",alignItems:"center",gap:8,fontWeight:600,background:z?"rgba(56, 189, 248, 0.15)":"transparent",border:z?"1px solid rgba(56, 189, 248, 0.4)":"1px solid transparent"},children:"\uD83D\uDCE7 Email Login"})})]})]})]}),s.jsx("div",{className:"mobile-overlay","data-open":y?"true":"false",onClick:j}),(0,s.jsxs)("main",{className:"content",children:[r&&s.jsx("h2",{style:{marginTop:0,marginBottom:24},children:r}),t]})]})]}),a&&(0,s.jsxs)("main",{className:"content content--without-sidebar",children:[r&&s.jsx("h2",{style:{marginTop:0,marginBottom:24},children:r}),t]}),m&&s.jsx(p.Z,{guildId:e})]})}a()}catch(e){a(e)}})},4947:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>d});var s=r(997),i=r(6689),n=r(4612),l=r(2608),o=e([n]);function d({guildId:e}){let{user:t}=(0,l.k)(),[r,a]=(0,i.useState)(!1),[n,o]=(0,i.useState)([]),[d,c]=(0,i.useState)(""),[h,u]=(0,i.useState)(null),[x,p]=(0,i.useState)(!0),m=(0,i.useRef)(null),g=(0,i.useRef)(null),f=t?.role==="admin"?"(admin)":"",y=()=>{if(!d.trim()||!m.current||!e)return;let t={text:d.trim(),guildId:e,adminOnly:!1};m.current.emit("chat:message",t,e=>{e?.error&&u(e.error)}),c("")};return t?(0,s.jsxs)("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:9999,backgroundColor:"#1f2937",borderTop:"1px solid #374151",boxShadow:"0 -2px 10px rgba(0,0,0,0.3)"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",cursor:"pointer",backgroundColor:"#111827",borderBottom:r?"1px solid #374151":"none"},onClick:()=>a(!r),children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx("span",{style:{color:"#f3f4f6",fontWeight:"600"},children:"Chat"}),f&&s.jsx("span",{style:{fontSize:"0.75rem",color:"#9ca3af",backgroundColor:"#374151",padding:"0.125rem 0.5rem",borderRadius:"0.25rem"},children:f}),x&&s.jsx("span",{style:{fontSize:"0.75rem",color:"#fbbf24"},children:"Connecting..."}),h&&s.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444"},children:h})]}),s.jsx("span",{style:{color:"#9ca3af"},children:r?"▼":"▲"})]}),r&&(0,s.jsxs)("div",{style:{height:"40vh",maxHeight:"400px",display:"flex",flexDirection:"column",backgroundColor:"#1f2937"},children:[(0,s.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"0.5rem",display:"flex",flexDirection:"column",gap:"2px",fontSize:"0.8rem",lineHeight:"1.2"},children:[0===n.length&&!h&&!x&&s.jsx("div",{style:{color:"#9ca3af",textAlign:"center",marginTop:"2rem",fontSize:"0.75rem"},children:"No messages yet. Start chatting!"}),n.map((e,t)=>(0,s.jsxs)("div",{style:{padding:"4px 6px",backgroundColor:e.adminOnly?"#374151":"transparent",borderLeft:`2px solid ${e.from.color}`,borderRadius:"2px"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:"0.4rem",marginBottom:"2px"},children:[s.jsx("span",{style:{color:e.from.color,fontWeight:"600",fontSize:"0.75rem"},children:e.from.name}),s.jsx("span",{style:{color:"#6b7280",fontSize:"0.65rem"},children:new Date(e.ts).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.adminOnly&&s.jsx("span",{style:{color:"#ef4444",fontSize:"0.65rem",fontWeight:"600"},children:"[ADMIN]"})]}),s.jsx("div",{style:{color:"#f3f4f6",fontSize:"0.8rem",whiteSpace:"pre-wrap",lineHeight:"1.3"},children:e.text})]},e.messageId||t)),s.jsx("div",{ref:g})]}),!h&&(0,s.jsxs)("div",{style:{padding:"0.5rem 0.75rem",borderTop:"1px solid #374151",display:"flex",gap:"0.4rem"},children:[s.jsx("input",{type:"text",value:d,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},placeholder:e?"Type a message...":"Select a guild first",disabled:!e||x,style:{flex:1,padding:"0.4rem 0.6rem",backgroundColor:"#374151",border:"1px solid #4b5563",borderRadius:"0.25rem",color:"#f3f4f6",fontSize:"0.8rem"}}),s.jsx("button",{onClick:y,disabled:!d.trim()||!e||x,style:{padding:"0.4rem 0.8rem",backgroundColor:d.trim()&&e&&!x?"#3b82f6":"#4b5563",color:"#f3f4f6",border:"none",borderRadius:"0.25rem",cursor:d.trim()&&e&&!x?"pointer":"not-allowed",fontSize:"0.75rem",fontWeight:"600"},children:"Send"})]})]})]}):null}n=(o.then?(await o)():o)[0],a()}catch(e){a(e)}})},7751:(e,t,r)=>{"use strict";r.d(t,{SC:()=>n,Y:()=>i,h_:()=>l});var a=r(6689),s=r(2608);function i(e){let t=Number.isFinite(e)?Math.max(0,Math.floor(e)):Math.max(0,Math.floor(Number(e)||0)),r=Math.floor(t/86400),a=Math.floor(t%86400/3600),s=Math.floor(t%3600/60);return r>0?`${r}d ${a}h`:a>0?`${a}h ${s}m`:s>0?`${s}m`:`${t%60}s`}async function n(e,{method:t="GET",body:r,csrfToken:a}={}){let s=new Headers;!r||r instanceof FormData||s.set("Content-Type","application/json"),a&&t&&"GET"!==t&&s.set("x-csrf-token",a);let i=await fetch(`http://172.19.0.1:3080${e}`,{method:t,body:r?r instanceof FormData?r:JSON.stringify(r):void 0,credentials:"include",headers:s});if(204===i.status)return null;let n=(i.headers.get("content-type")||"").includes("application/json")?await i.json():await i.text();if(!i.ok)throw Error(n?.error||n?.message||`HTTP ${i.status}`);return n}function l(){let{csrfToken:e}=(0,s.k)();return(0,a.useCallback)((t,r={})=>n(t,{...r,csrfToken:e}),[e])}},2608:(e,t,r)=>{"use strict";r.d(t,{e:()=>n,k:()=>l});var a=r(997),s=r(6689);let i=(0,s.createContext)({user:null,csrfToken:null,loading:!0,refresh:async()=>{},setCsrfToken:()=>{}});function n({children:e}){let[t,r]=(0,s.useState)({user:null,csrfToken:null,loading:!0}),n=(0,s.useCallback)(()=>null,[]),l=(0,s.useCallback)(async()=>{let e=n();try{let t=await fetch("http://172.19.0.1:3080/api/auth/me",{credentials:"include"});if(!t.ok)throw Error(`HTTP ${t.status}`);let a=await t.json(),s=a.csrfToken||e||null;r({user:a,csrfToken:s,loading:!1})}catch(t){r({user:null,csrfToken:e||null,loading:!1})}},[n]),o=(0,s.useCallback)(e=>{r(t=>({...t,csrfToken:e}))},[]),d=(0,s.useMemo)(()=>({user:t.user,csrfToken:t.csrfToken,loading:t.loading,refresh:l,setCsrfToken:o}),[t,l,o]);return a.jsx(i.Provider,{value:d,children:e})}function l(){return(0,s.useContext)(i)}},3414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(997);r(6764);var s=r(2608);function i({Component:e,pageProps:t}){return a.jsx(s.e,{children:a.jsx(e,{...t})})}},7645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(997),s=r(6859),i=r.n(s);class n extends i(){render(){return(0,a.jsxs)(s.Html,{children:[a.jsx(s.Head,{}),(0,a.jsxs)("body",{className:"__compact","data-density":"ultra",children:[a.jsx(s.Main,{}),a.jsx(s.NextScript,{})]})]})}}},6764:()=>{}};