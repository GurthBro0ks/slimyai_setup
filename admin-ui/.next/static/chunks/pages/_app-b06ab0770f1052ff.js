(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{1118:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return t(3414)}])},2608:function(n,e,t){"use strict";t.d(e,{e:function(){return l},k:function(){return i}});var r=t(5893),s=t(7294);let u=(0,s.createContext)({user:null,csrfToken:null,loading:!0,refresh:async()=>{},setCsrfToken:()=>{}}),o="slimy_admin_csrf";function c(n){n?sessionStorage.setItem(o,n):sessionStorage.removeItem(o)}function l(n){let{children:e}=n,[t,l]=(0,s.useState)({user:null,csrfToken:null,loading:!0}),i=(0,s.useCallback)(()=>{let n=window.location.hash;if(n&&n.startsWith("#csrf=")){let e=decodeURIComponent(n.slice(6));return window.location.hash="",c(e),e}return sessionStorage.getItem(o)||null},[]),a=(0,s.useCallback)(async()=>{let n=i();try{let e=await fetch("".concat("http://172.19.0.1:3080","/api/auth/me"),{credentials:"include"});if(!e.ok)throw Error("HTTP ".concat(e.status));let t=await e.json(),r=t.csrfToken||n||null;r&&c(r),l({user:t,csrfToken:r,loading:!1})}catch(e){l({user:null,csrfToken:n||null,loading:!1})}},[i]);(0,s.useEffect)(()=>{a()},[a]);let f=(0,s.useCallback)(n=>{c(n),l(e=>({...e,csrfToken:n}))},[]),d=(0,s.useMemo)(()=>({user:t.user,csrfToken:t.csrfToken,loading:t.loading,refresh:a,setCsrfToken:f}),[t,a,f]);return(0,r.jsx)(u.Provider,{value:d,children:e})}function i(){return(0,s.useContext)(u)}},3414:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return u}});var r=t(5893);t(9311);var s=t(2608);function u(n){let{Component:e,pageProps:t}=n;return(0,r.jsx)(s.e,{children:(0,r.jsx)(e,{...t})})}},9311:function(){}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[774,179],function(){return e(1118),e(9090)}),_N_E=n.O()}]);