(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{8936:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return t(4701)}])},6e3:function(e,n,t){"use strict";t.d(n,{e:function(){return l},k:function(){return a}});var r=t(4246),s=t(7378);let o=(0,s.createContext)({user:null,csrfToken:null,loading:!0,refresh:async()=>{},setCsrfToken:()=>{}}),u="slimy_admin_csrf";function c(e){e?sessionStorage.setItem(u,e):sessionStorage.removeItem(u)}function l(e){let{children:n}=e,[t,l]=(0,s.useState)({user:null,csrfToken:null,loading:!0}),a=(0,s.useCallback)(()=>{let e=window.location.hash;if(e&&e.startsWith("#csrf=")){let n=decodeURIComponent(e.slice(6));return window.location.hash="",c(n),n}return sessionStorage.getItem(u)||null},[]),i=(0,s.useCallback)(async()=>{let e=a();try{let n=await fetch("".concat("http://localhost:3080","/api/auth/me"),{credentials:"include"});if(!n.ok)throw Error("HTTP ".concat(n.status));let t=await n.json(),r=t.csrfToken||e||null;r&&c(r),l({user:t,csrfToken:r,loading:!1})}catch(n){l({user:null,csrfToken:e||null,loading:!1})}},[a]);(0,s.useEffect)(()=>{i()},[i]);let f=(0,s.useCallback)(e=>{c(e),l(n=>({...n,csrfToken:e}))},[]),d=(0,s.useMemo)(()=>({user:t.user,csrfToken:t.csrfToken,loading:t.loading,refresh:i,setCsrfToken:f}),[t,i,f]);return(0,r.jsx)(o.Provider,{value:d,children:n})}function a(){return(0,s.useContext)(o)}},4701:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return o}});var r=t(4246);t(1597);var s=t(6e3);function o(e){let{Component:n,pageProps:t}=e;return(0,r.jsx)(s.e,{children:(0,r.jsx)(n,{...t})})}},1597:function(){}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[774,179],function(){return n(8936),n(2293)}),_N_E=e.O()}]);