(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{9898:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guilds/[guildId]/rescan",function(){return n(2906)}])},4167:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5893),s=n(7294),l=n(7751);function i(e){var t,n;let{guildId:i}=e,r=(0,l.h_)(),[u,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(""),[p,m]=(0,s.useState)("auto"),[h,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(null),y=async e=>{if(e.preventDefault(),!u||!o){v("File and member are required");return}let t=new FormData;t.append("file",u),t.append("member",o),t.append("metric",p),v("Uploading…");try{let e=await r("/api/guilds/".concat(i,"/rescan-user"),{method:"POST",body:t});g(e),v("Rescan complete")}catch(e){v(e.message),g(null)}};return(0,a.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,a.jsxs)("form",{onSubmit:y,className:"card",style:{display:"grid",gap:16,maxWidth:540},children:[(0,a.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:e=>{var t;return d((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,a.jsx)("input",{className:"input",placeholder:"Display name",value:o,onChange:e=>c(e.target.value)}),(0,a.jsxs)("select",{className:"select",value:p,onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{value:"auto",children:"Auto"}),(0,a.jsx)("option",{value:"total",children:"Total"}),(0,a.jsx)("option",{value:"sim",children:"Sim"})]}),(0,a.jsx)("button",{className:"btn",type:"submit",children:"Upload & Parse"}),f&&(0,a.jsx)("p",{style:{margin:0},children:f})]}),h&&(0,a.jsxs)("div",{className:"card",style:{maxWidth:540},children:[(0,a.jsx)("h4",{style:{marginTop:0},children:"Result"}),(0,a.jsxs)("p",{children:[h.displayName," → ",Number(h.value).toLocaleString()," (",h.metric,")"]}),(0,a.jsxs)("p",{style:{opacity:.7},children:["Ensemble disagreements: ",null===(t=h.ensemble)||void 0===t?void 0:t.disagreements," / ",null===(n=h.ensemble)||void 0===n?void 0:n.totalMembers]})]})]})}},2906:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n(5893),s=n(1163),l=n(5754),i=n(4167);function r(){let e=function(e){if(e)return Array.isArray(e)?e[0]:e}((0,s.useRouter)().query.guildId);return(0,a.jsxs)(l.Z,{guildId:e,title:"Rescan Member Screenshot",children:[(0,a.jsxs)("p",{style:{marginBottom:18,opacity:.75},children:["Rescan tools now live under the dashboard's ",(0,a.jsx)("strong",{children:"Current Sheet"})," tab. You can continue to run rescan jobs below if needed."]}),(0,a.jsx)(i.Z,{guildId:e})]})}}},function(e){e.O(0,[359,754,888,774,179],function(){return e(e.s=9898)}),_N_E=e.O()}]);