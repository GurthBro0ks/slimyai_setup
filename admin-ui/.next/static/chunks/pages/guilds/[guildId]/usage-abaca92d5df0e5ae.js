(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{436:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guilds/[guildId]/usage",function(){return l(5386)}])},5386:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return g}});var t=l(5893),a=l(7294),d=l(1163),n=l(6976),r=l(3148),i=l(6495),c=l(5754),o=l(7751);r.kL.register(r.uw,r.f$,r.ZL,r.u,r.De);let u=e=>(0,o.SC)(e),h=[{label:"Today",value:"today"},{label:"7 Days",value:"7d"},{label:"30 Days",value:"30d"},{label:"This Month",value:"this_month"}];function g(){let{guildId:e}=(0,d.useRouter)().query,[s,l]=(0,a.useState)("7d"),{data:r}=(0,n.ZP)(e?"/api/guilds/".concat(e,"/usage?window=").concat(s):null,u),o=r?{labels:r.aggregated.byModel.map(e=>e.model),datasets:[{label:"Cost (USD)",data:r.aggregated.byModel.map(e=>Number(e.cost||0)),backgroundColor:"rgba(56, 189, 248, 0.4)"}]}:null;return(0,t.jsxs)(c.Z,{guildId:e,title:"Usage & Spend",children:[(0,t.jsx)("div",{className:"card",style:{marginBottom:24,display:"flex",gap:12},children:h.map(e=>(0,t.jsx)("button",{className:"btn ".concat(s===e.value?"":"outline"),onClick:()=>l(e.value),children:e.label},e.value))}),r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("h4",{style:{marginTop:0},children:"Cost by Model"}),o&&(0,t.jsx)(i.$Q,{data:o})]}),(0,t.jsx)("div",{className:"card",style:{overflowX:"auto"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Model"}),(0,t.jsx)("th",{children:"Requests"}),(0,t.jsx)("th",{children:"Input Tokens"}),(0,t.jsx)("th",{children:"Output Tokens"}),(0,t.jsx)("th",{children:"Images"}),(0,t.jsx)("th",{children:"Cost"})]})}),(0,t.jsx)("tbody",{children:r.aggregated.byModel.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.model}),(0,t.jsx)("td",{children:e.requests||0}),(0,t.jsx)("td",{children:e.inputTokens||0}),(0,t.jsx)("td",{children:e.outputTokens||0}),(0,t.jsx)("td",{children:e.images||0}),(0,t.jsxs)("td",{children:["$",Number(e.cost||0).toFixed(2)]})]},e.model))})]})})]}):(0,t.jsx)("p",{children:"Loading usageâ€¦"})]})}}},function(e){e.O(0,[196,359,421,754,888,774,179],function(){return e(e.s=436)}),_N_E=e.O()}]);